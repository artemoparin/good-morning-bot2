name: Send Telegram Message

on:
  schedule:
    # –£—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ 05:00 UTC (08:00 –ø–æ –ú–æ—Å–∫–≤–µ)
    - cron: '0 5 * * *'
    # –í–µ—á–µ—Ä–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ 21:00 UTC (00:00 –ø–æ –ú–æ—Å–∫–≤–µ)
    - cron: '0 21 * * *'
  workflow_dispatch:
    inputs:
      message-type:
        description: '–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è'
        required: true
        default: 'test'
        type: choice
        options:
        - morning
        - evening
        - test

jobs:
  send-message:
    runs-on: ubuntu-latest
    steps:
    - name: Send Morning Message
      if: |
        github.event.schedule == '0 5 * * *' ||
        github.event.inputs.message-type == 'morning'
      run: |
        echo "–û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
        curl -s -X POST https://api.telegram.org/bot${{ secrets.BOT_TOKEN }}/sendMessage \
          -d chat_id=${{ secrets.CHAT_ID }} \
          -d text="–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, –ª—é–±–∏–º–∞—è! ‚òÄÔ∏è –ü—É—Å—Ç—å —Ç–≤–æ–π –¥–µ–Ω—å –±—É–¥–µ—Ç –Ω–∞–ø–æ–ª–Ω–µ–Ω —É–ª—ã–±–∫–∞–º–∏ –∏ —Ä–∞–¥–æ—Å—Ç—å—é! üíñ"
        echo "–£—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!"

    - name: Send Evening Message
      if: |
        github.event.schedule == '0 21 * * *' ||
        github.event.inputs.message-type == 'evening'
      run: |
        echo "–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤–µ—á–µ—Ä–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
        sleep 2
        curl -s -X POST https://api.telegram.org/bot${{ secrets.BOT_TOKEN }}/sendMessage \
          -d chat_id=${{ secrets.CHAT_ID }} \
          -d text="–°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏, –º–æ—è –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è! üí´ –ü—É—Å—Ç—å —Ç–µ–±–µ —Å–Ω—è—Ç—Å—è —Å–∞–º—ã–µ —Å–ª–∞–¥–∫–∏–µ —Å–Ω—ã. üíï"
        echo "–í–µ—á–µ—Ä–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!"

    - name: Send Test Messages
      if: github.event.inputs.message-type == 'test'
      run: |
        echo "–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¢–ï–°–¢–û–í–´–ï —Å–æ–æ–±—â–µ–Ω–∏—è (–æ–±–∞)..."
        curl -s -X POST https://api.telegram.org/bot${{ secrets.BOT_TOKEN }}/sendMessage \
          -d chat_id=${{ secrets.CHAT_ID }} \
          -d text="üîÑ –¢–ï–°–¢: –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, –ª—é–±–∏–º–∞—è! ‚òÄÔ∏è"
        sleep 2
        curl -s -X POST https://api.telegram.org/bot${{ secrets.BOT_TOKEN }}/sendMessage \
          -d chat_id=${{ secrets.CHAT_ID }} \
          -d text="üîÑ –¢–ï–°–¢: –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏, –º–æ—è –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è! üí´"
        echo "–¢–µ—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã!"
